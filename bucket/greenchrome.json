{
    "version": "144.0.7559.110",
    "description": "Google Chrome with Chrome++ support (persisted configuration).",
    "homepage": "https://www.google.com/chrome/",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.google.com/chrome/terms/"
    },
    "architecture": {
        "64bit": {
            "url": "https://dl.google.com/release2/chrome/ew64l42idv7ya4fzpsashmcdzy_144.0.7559.110/144.0.7559.110_chrome_installer_uncompressed.exe#/dl.7z",
            "hash": "da7750bd4c928c38314f574a740901adc3fead652811e4ee25c48c6968a5ecb0"
        },
        "32bit": {
            "url": "https://dl.google.com/release2/chrome/acq3fpl7c5bpdozphmsyqe54txka_144.0.7559.110/144.0.7559.110_chrome_installer_uncompressed.exe#/dl.7z",
            "hash": "9e3ee33c20bc77a72f956cdb69c6daf0ce2bb88a2b1c8de993799d05b28cda66"
        },
        "arm64": {
            "url": "https://dl.google.com/release2/chrome/alpvn67upllcxk7oys2sn5cvaq_144.0.7559.110/144.0.7559.110_chrome_installer_uncompressed.exe#/dl.7z",
            "hash": "f39f7360debf77c1081d54691cc62b09f1d2c8681194435958453025a7b38629"
        }
    },

    "extract_dir": "Chrome-bin",

    "bin": [
        ["chrome.exe", "chrome"]
    ],

    "shortcuts": [
        ["chrome.exe", "Google Chrome"]
    ],

    "env_set": {
        "CHROME_EXECUTABLE": "$dir\\chrome.exe"
    },

    "persist": [
        "version.dll",
        "chrome++.ini"
    ],

    "post_install": [
        "if (!(Test-Path \"$persist_dir\\chrome++.ini\")) {",
        "    @(",
        "        '; Chrome++ default config',",
        "        '; https://github.com/icy37785/ChromePlus',",
        "        '',",
        "        '[general]'",
        "    ) | Set-Content -Encoding UTF8 \"$persist_dir\\chrome++.ini\"",
        "}"
    ],

    "checkver": {
        "script": [
            "$AppID = '{8A69D345-D564-463C-AFF1-A69D9E530F96}'",
            "$ArchParams = @{ x64='x64-stable'; x86='x86-stable'; arm64='arm64-stable' }",
            "$Body = @(",
            "  '<?xml version=\"1.0\" encoding=\"utf-8\"?>',",
            "  '<request protocol=\"3.0\">',",
            "  '  <os platform=\"win\" version=\"10.0.22000\" arch=\"x64\"/>',",
            "  \"  <app appid=\\\"$AppID\\\" ap=\\\"$($ArchParams.x64)\\\" version=\\\"\\\">\",",
            "  '    <updatecheck/>',",
            "  '  </app>',",
            "  '</request>'",
            ") -join \"`n\"",
            "$r = Invoke-RestMethod -Method Post -Uri 'https://update.googleapis.com/service/update2' -Body $Body",
            "$r.response.app.updatecheck.manifest.version"
        ],
        "regex": "([\\d.]+)"
    },

    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://dl.google.com/release2/chrome/$matchVersion#/dl.7z"
            },
            "32bit": {
                "url": "https://dl.google.com/release2/chrome/$matchVersion#/dl.7z"
            },
            "arm64": {
                "url": "https://dl.google.com/release2/chrome/$matchVersion#/dl.7z"
            }
        }
    }
}
